<svg id="レイヤー_1" data-name="レイヤー 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640.33 497"><defs><style>.cls-1,.cls-16{fill:#fff;}.cls-15,.cls-17,.cls-2{font-size:11px;}.cls-15,.cls-17,.cls-2,.cls-4,.cls-5{fill:#231815;}.cls-17,.cls-2{font-family:Meiryo, Meiryo;}.cls-2{letter-spacing:0.02em;}.cls-3{letter-spacing:-0.48em;}.cls-5{letter-spacing:-0.48em;}.cls-10,.cls-11,.cls-12,.cls-13,.cls-14,.cls-6,.cls-7,.cls-8{fill:none;}.cls-16,.cls-6,.cls-7,.cls-8{stroke:#231815;}.cls-10,.cls-11,.cls-12,.cls-13,.cls-14,.cls-16,.cls-6,.cls-7,.cls-8{stroke-miterlimit:10;}.cls-7{stroke-dasharray:7.1 7.1;}.cls-8{stroke-dasharray:6.77 6.77;}.cls-9{font-size:12px;fill:#e60012;font-family:Meiryo-Bold, Meiryo;}.cls-19,.cls-9{font-weight:700;}.cls-10,.cls-11,.cls-12,.cls-13,.cls-14{stroke:#e60012;stroke-width:0.5px;}.cls-11{stroke-dasharray:6.94 6.94;}.cls-12{stroke-dasharray:6.83 6.83;}.cls-13{stroke-dasharray:6.92 6.92;}.cls-14{stroke-dasharray:6.83 6.83;}.cls-15{font-family:KozGoPr6N-Regular-90ms-RKSJ-H, Kozuka Gothic Pr6N;}.cls-18{letter-spacing:2.93em;}.cls-19{font-family:Meiryo-BoldItalic, Meiryo;font-style:italic;text-decoration:underline;}</style></defs><title>アートボード 1</title><rect class="cls-1" width="640.33" height="497"/><text class="cls-2" transform="translate(316.96 320.36)">QEI Interrupt() : QEI の割り込み関数<tspan x="0" y="30">reset_flag : マスター送信されてくるリセットフラグ</tspan><tspan x="0" y="45">POSxCNT : QEI の位置カウントレジスタ</tspan><tspan x="0" y="60">g_qei_cnt : POSxCNT がオーバーフローした回数</tspan><tspan x="0" y="75">cnt : オーバーフローを考慮した位置カウント</tspan><tspan x="0" y="90">odometry : エンコーダの回転角度．単位は [deg]</tspan><tspan class="cls-3" x="257.74" y="90">．</tspan><tspan x="0" y="105">QEI Interrupt : POSxCNT がオーバーフローした際に</tspan><tspan class="cls-1"><tspan x="0" y="120">QEI Interrupt : </tspan><tspan class="cls-4" x="87.58" y="120">呼び出される割り込み関数</tspan><tspan class="cls-5" x="222.22" y="120">．</tspan></tspan><tspan x="0" y="135">QEIxCONbits.UPDN : 位置カウンタ方向ステータスビット</tspan><tspan x="0" y="150">QEIxIF : QEI 割り込みの割り込みフラグ</tspan></text><polyline class="cls-6" points="621.33 475 621.33 478.5 617.83 478.5"/><line class="cls-7" x1="610.73" y1="478.5" x2="316.01" y2="478.5"/><polyline class="cls-6" points="312.46 478.5 308.96 478.5 308.96 475"/><line class="cls-8" x1="308.96" y1="468.23" x2="308.96" y2="309.24"/><polyline class="cls-6" points="308.96 305.86 308.96 302.36 312.46 302.36"/><line class="cls-7" x1="319.56" y1="302.36" x2="614.28" y2="302.36"/><polyline class="cls-6" points="617.83 302.36 621.33 302.36 621.33 305.86"/><line class="cls-8" x1="621.33" y1="312.62" x2="621.33" y2="471.62"/><text class="cls-9" transform="translate(70.23 69.94)">A</text><text class="cls-9" transform="translate(51.95 283.36)">B</text><text class="cls-9" transform="translate(7.87 349.36)">C</text><text class="cls-9" transform="translate(344.93 68.95)">D</text><polyline class="cls-10" points="257 241.5 257 245 253.5 245"/><line class="cls-11" x1="246.56" y1="245" x2="69.64" y2="245"/><polyline class="cls-10" points="66.17 245 62.67 245 62.67 241.5"/><line class="cls-12" x1="62.67" y1="234.67" x2="62.67" y2="60.47"/><polyline class="cls-10" points="62.67 57.06 62.67 53.56 66.17 53.56"/><line class="cls-11" x1="73.1" y1="53.56" x2="250.03" y2="53.56"/><polyline class="cls-10" points="253.5 53.56 257 53.56 257 57.06"/><line class="cls-12" x1="257" y1="63.89" x2="257" y2="238.08"/><polyline class="cls-10" points="611.67 208.13 611.67 211.63 608.17 211.63"/><line class="cls-13" x1="601.24" y1="211.63" x2="341.63" y2="211.63"/><polyline class="cls-10" points="338.17 211.63 334.67 211.63 334.67 208.13"/><line class="cls-14" x1="334.67" y1="201.29" x2="334.67" y2="54.39"/><polyline class="cls-10" points="334.67 50.97 334.67 47.47 338.17 47.47"/><line class="cls-13" x1="345.09" y1="47.47" x2="604.71" y2="47.47"/><polyline class="cls-10" points="608.17 47.47 611.67 47.47 611.67 50.97"/><line class="cls-14" x1="611.67" y1="57.8" x2="611.67" y2="204.71"/><text class="cls-15" transform="translate(135.82 32.5)">start</text><path class="cls-6" d="M124.42,38a9,9,0,1,1,0-18h44.75a9,9,0,0,1,0,18Z"/><text class="cls-2" transform="translate(223.04 96.66)">NO</text><text class="cls-2" transform="translate(120.5 143.19)">YES</text><line class="cls-6" x1="146.8" y1="261.23" x2="146.8" y2="322.74"/><polygon class="cls-4" points="143.62 316.83 144.56 316.49 146.8 322.64 149.04 316.49 149.98 316.83 146.8 325.57 143.62 316.83"/><line class="cls-6" x1="146.8" y1="199.48" x2="146.8" y2="258.41"/><polygon class="cls-4" points="143.62 252.5 144.56 252.16 146.8 258.31 149.04 252.16 149.98 252.5 146.8 261.23 143.62 252.5"/><line class="cls-6" x1="146.8" y1="154.73" x2="146.8" y2="196.66"/><polygon class="cls-4" points="143.62 190.75 144.56 190.41 146.8 196.56 149.04 190.41 149.98 190.75 146.8 199.48 143.62 190.75"/><line class="cls-6" x1="146.8" y1="65.37" x2="146.8" y2="151.91"/><polygon class="cls-4" points="143.62 146 144.56 145.66 146.8 151.81 149.04 145.66 149.98 146 146.8 154.74 143.62 146"/><line class="cls-6" x1="146.8" y1="38" x2="146.8" y2="62.55"/><polygon class="cls-4" points="143.62 56.63 144.56 56.29 146.8 62.45 149.04 56.29 149.98 56.63 146.8 65.37 143.62 56.63"/><rect class="cls-16" x="23.26" y="325.57" width="247.08" height="37.25"/><text class="cls-17" transform="translate(28.81 340.73)">odometry ← cnt<tspan class="cls-18" x="0" y="16">	</tspan><tspan x="36" y="16">÷ ( </tspan><tspan class="cls-19" x="57.15" y="16">エンコーダ分解能</tspan><tspan x="145.15" y="16" xml:space="preserve"> × 4.0 ) × 360.0</tspan></text><polygon class="cls-16" points="218.92 101.07 147.37 134.65 74.67 98.67 146.22 65.08 218.92 101.07"/><text class="cls-17" transform="translate(96.63 102.86)">reset_flag == true</text><rect class="cls-16" x="97.38" y="154.73" width="98.83" height="22.67"/><text class="cls-17" transform="translate(107.94 169.9)">g_qei_cnt ← 0</text><rect class="cls-16" x="97.38" y="199.48" width="98.83" height="22.67"/><text class="cls-17" transform="translate(107.94 214.65)">POSxCNT ← 0</text><rect class="cls-16" x="70.26" y="261.23" width="153.08" height="37.25"/><text class="cls-17" transform="translate(77.69 276.4)">cnt ← 65536 × g_qei_cnt<tspan class="cls-18" x="0" y="16">	</tspan><tspan x="36" y="16" xml:space="preserve"> + POSxCNT</tspan></text><polyline class="cls-6" points="218.92 101.07 247 101.07 247 235 149.62 235"/><polygon class="cls-4" points="155.53 231.82 155.88 232.76 149.72 235 155.88 237.24 155.53 238.18 146.8 235 155.53 231.82"/><polyline class="cls-6" points="146.8 362.56 146.8 389 289.67 389 289.67 47.17 149.62 47.17"/><polygon class="cls-4" points="155.53 43.99 155.88 44.93 149.72 47.17 155.88 49.41 155.53 50.35 146.8 47.17 155.53 43.99"/><text class="cls-2" transform="translate(535.71 101.07)">NO</text><text class="cls-2" transform="translate(407.64 162.57)">YES</text><rect class="cls-16" x="514.75" y="151.23" width="88.5" height="22.67"/><text class="cls-17" transform="translate(525.31 166.4)">g_qei_cnt－</text><text class="cls-17" transform="translate(586.74 166.4)">－</text><line class="cls-6" x1="436.71" y1="224.28" x2="436.71" y2="268.03"/><polygon class="cls-4" points="433.52 262.12 434.46 261.78 436.7 267.94 438.94 261.78 439.88 262.12 436.7 270.86 433.52 262.12"/><line class="cls-6" x1="436.71" y1="173.69" x2="436.71" y2="221.45"/><polygon class="cls-4" points="433.52 215.54 434.46 215.2 436.7 221.35 438.94 215.2 439.88 215.54 436.7 224.28 433.52 215.54"/><line class="cls-6" x1="436.71" y1="62.3" x2="436.71" y2="170.87"/><polygon class="cls-4" points="433.52 164.96 434.46 164.61 436.7 170.77 438.94 164.61 439.88 164.96 436.7 173.69 433.52 164.96"/><line class="cls-6" x1="436.71" y1="38" x2="436.71" y2="59.47"/><polygon class="cls-4" points="433.52 53.56 434.46 53.22 436.7 59.37 438.94 53.22 439.88 53.56 436.7 62.3 433.52 53.56"/><polygon class="cls-16" points="531.94 109.43 437.47 153.78 341.47 106.27 435.94 61.92 531.94 109.43"/><text class="cls-17" transform="translate(361.43 110.46)">QEIxCONbits.UPDN == true</text><rect class="cls-16" x="392.46" y="173.69" width="88.5" height="22.67"/><text class="cls-17" transform="translate(403.01 188.86)">g_qei_cnt++</text><rect class="cls-16" x="397.08" y="224.27" width="79.25" height="22.67"/><text class="cls-17" transform="translate(407.64 239.44)">QEIxIF ← 0</text><polyline class="cls-6" points="531.94 109.43 559 109.43 559 148.41"/><polygon class="cls-4" points="555.82 142.5 556.76 142.16 559 148.31 561.24 142.16 562.18 142.5 559 151.23 555.82 142.5"/><polyline class="cls-6" points="559 173.69 559 206.5 439.53 206.5"/><polygon class="cls-4" points="445.44 203.32 445.78 204.26 439.63 206.5 445.78 208.74 445.44 209.68 436.7 206.5 445.44 203.32"/><text class="cls-15" transform="translate(386.57 32.5)"><tspan xml:space="preserve">QEI  Interrupt  start</tspan></text><line class="cls-6" x1="492.33" y1="38" x2="389.5" y2="38"/><line class="cls-6" x1="389.5" y1="20" x2="492.33" y2="20"/><path class="cls-6" d="M389.5,38a9,9,0,1,1,0-18"/><path class="cls-6" d="M492.33,38a9,9,0,0,0,0-18"/><text class="cls-15" transform="translate(382.36 283)"><tspan xml:space="preserve">QEI  Interrupt  end</tspan></text><line class="cls-6" x1="488.12" y1="288.5" x2="385.29" y2="288.5"/><line class="cls-6" x1="385.29" y1="270.5" x2="488.12" y2="270.5"/><path class="cls-6" d="M385.29,288.5a9,9,0,0,1,0-18"/><path class="cls-6" d="M488.12,288.5a9,9,0,1,0,0-18"/></svg>